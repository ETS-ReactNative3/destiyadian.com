<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>destiyadian.com</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/particleground/jquery.particleground.min.js"></script>

    <script src="bower_components/react/react.min.js"></script>
    <script src="node_modules/babel-core/browser.min.js"></script>
</head>
<body>
    <nav id="top-menu"></nav>
    <nav id="top-menu-ghost"></nav>

    <div id="hero">
        <div id="tagline-container">
            <div id="tagline">
                <h1>Hi, I'm Destiya</h1>
            </div>
        </div>
        
    </div>
    <div id="about">
        <h2>About Me</h2>
        <p>
            I'm a manual tester at a robotic company. But I'm a web enthusiast since I started my career as a web developer. I mostly code on PHP using CodeIgniter or Laravel to speed up things. In the past, I played with WordPress too. I don't do design, however when it comes to frontend I utilize Bootstrap and LESS to make my life easier.
        </p>
        <p>
            I love to learn new things. Currently I'm learning Golang and ReactJS. Those two technology become rising star these day. <small>(Note that I build this page using ReactJS)</small>
        </p>
        <p>
            When I'm not on code, you may find me watching AKB48 related videos or following their stories.
        </p>
    </div>
    <div id="portfolio-container">
        <div id="skillset"></div>
        <div id="portfolio"></div>
    </div>

    <div id="contact">
        <div id="contact-left">
            <h3>
                <a href="mailto:destiya.dian@gmail.com" title="">destiya <span>[dot]</span> dian <span>[at]</span> gmail <span>[dot]</span> com</a>
            </h3>
        </div>
        <div id="contact-right">
            <ul>
                <li><i class="fa fa-facebook-official"></i> &nbsp;<a href="#" class="social social-fb">Facebook Profile</a></li>
                <li><i class="fa fa-twitter"></i> &nbsp;<a href="#" class="social social-twitter">@eantz</a></li>
                <li><i class="fa fa-linkedin"></i> &nbsp;<a href="#" class="social social-linkedin">LinkedIn Profile</a></li>
                <li><i class="fa fa-github"></i> &nbsp;<a href="#" class="social social-github">@eantz</a></li>
            </ul>
            
        </div>
    </div>

    <div id="modal-container">
        
    </div>

    <script type="text/babel">
        function clientSize () {
            var height = document.documentElement.clientHeight;
            var width = document.documentElement.offsetWidth;

            return [width, height];
        }

        function scrollToElem(elem) {
            var doc = document.documentElement;
            var topW = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);

            var elemTarget = document.getElementById(elem);
            var topE = (elemTarget.offsetTop || elemTarget.scrollTop)  - (elemTarget.clientTop || 0);

            var distance = topE - topW;

            var duration = 600;

            var step = Math.abs(Math.round(distance / 10));
            var leap = (distance > 0) ? topW + Math.round(duration/step) : topW - Math.round(duration/step);

            var smoothies = function() {
                console.log(leap);
                window.scroll(0, leap);
                
                if(distance > 0) {
                    if(leap >= topE) {
                        clearInterval(interval);
                    }

                    leap += Math.abs(Math.round(duration/step));
                } else {
                    if(leap <= topE) {
                        clearInterval(interval);
                    }
                    leap -= Math.abs(Math.round(duration/step));
                }
                
            }

            var interval = setInterval(smoothies, Math.abs(Math.round(duration/step)));
            
        }

        var Navigation = React.createClass({
            
            handleClick: function(elem, e) {
                e.preventDefault();

                scrollToElem(elem);
            },
            render: function() {
                return (
                    <ul>
                        <li id="nav-to-home"><a href="http://destiyadian.com"><span className="nav-mobile">d</span> <span className="nav-desktop">destiyadian.com</span></a></li>
                        <li><a href="#about" onClick={this.handleClick.bind(this, 'about')}><i className="fa fa-question-circle"></i> <span className="nav-desktop">About</span></a></li>
                        <li><a href="#portfolio" onClick={this.handleClick.bind(this, 'portfolio')}><i className="fa fa-cubes"></i> <span className="nav-desktop">Projects</span></a></li>
                        <li><a href="#contact" onClick={this.handleClick.bind(this, 'contact')}><i className="fa fa-envelope"></i> <span className="nav-desktop">Contacts</span></a></li>
                        <li><a href="http://blog.destiyadian.com" target="_blank"><i className="fa fa-newspaper-o"></i> <span className="nav-desktop">Blog</span></a></li>
                    </ul>
                );
            }
        });

        var MainNav = React.createClass({
            addGhostMenu: function() {
                var doc = document.documentElement;
                var topW = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);

                var ghostMenu = document.getElementById('top-menu-ghost').innerHTML;
                if(topW >= 200 && ghostMenu == "") {
                    console.log('rendered');
                    React.render(
                        <Navigation />,
                        document.getElementById('top-menu-ghost')
                    );
                } else if(topW < 200 && ghostMenu != "") {
                    console.log('removed');
                    var ghostContainer = document.getElementById('top-menu-ghost').getElementsByTagName('ul');
                    ghostContainer[0].className = 'out';

                    setTimeout(function() {
                        React.unmountComponentAtNode(document.getElementById('top-menu-ghost'))
                    }, 1000);
                    
                }
            },
            componentDidMount: function() {
                window.addEventListener('scroll', this.addGhostMenu);
            },
            render: function() {
                return (
                    <Navigation />
                );
            }
        });

        var Skillset = React.createClass({
            getInitialState: function() {
                return {
                    'skills':[]
                }
            },
            handleClick: function(summary, e) {
                var dom = document.getElementById("skillset-desc");
                dom.className = dom.className + ' out';

                var desc = e.target.innerHTML;

                setTimeout(function() {
                    React.render(
                        <SkillsetDesc skill={desc} summary={summary} />,
                        document.getElementById('skillset')
                    );
                }, 1000)

                
                
            },
            componentWillMount: function() {
                var thisObj = this;

                $.ajax({
                    url:'skill.json',
                    dataType:'json'
                }).done(function(data) {
                    var myskills = [];

                    data.map(function(d) {
                        myskills.push(d);
                    });

                    thisObj.setState({
                        skills:myskills
                    });

                }).fail(function() {
                    console.log('failed to get skill data');
                });
            },
            render: function() {
                var thisObj = this;
                return (
                    <div id="skillset-desc">
                        <h2>Skillset</h2>
                        <p>
                        {this.state.skills.map(function(skill) {
                            return <span className={"skillset " + skill.level} onClick={thisObj.handleClick.bind(thisObj, skill.summary)}>{skill.name}</span>;
                        })}
                        </p>
                    </div>
                );
            }
        });

        var SkillsetDesc = React.createClass({
            handleClick: function(e) {
                var dom = document.getElementById("skillset-desc");
                dom.className = dom.className + ' out';

                setTimeout(function() {
                    React.render(
                        <Skillset />,
                        document.getElementById('skillset')
                    );
                }, 1000);

            },
            render: function() {
                return (
                    <div id="skillset-desc">
                        <h3><i className="fa fa-arrow-left" id="skillset-close" onClick={this.handleClick}></i>  Skillset : {this.props.skill}</h3>
                        <p>
                            {this.props.summary}
                        </p>
                        
                    </div>
                    
                );
            }
        });

        var PortfolioItem = React.createClass({

            handleMoreClick: function(portfolioData, e) {
                e.preventDefault();

                React.render(
                    <FullPortfolio portfolioData={portfolioData} />,
                    document.getElementById('modal-container')
                );
            },
            render: function() {
                return (
                    <div className="portfolio">
                        <div className="portfolio-img-container">
                            <img src={'img/' + this.props.portfolioData.thumbnail}  />
                        </div>
                        <div className="portfolio-desc-container">
                            <h3>{this.props.portfolioData.name}</h3>
                            <div className="portfolio-desc">
                                <i className="fa fa-bullseye"></i> 
                                {this.props.portfolioData.role.map(function(r) {
                                    return ' ' + r;
                                }).join(' / ')}
                            </div>
                            <div className="portfolio-desc">
                                <i className="fa fa-cogs"></i> 
                                {this.props.portfolioData.technology.map(function(t) {
                                    return ' ' + t;
                                }).join(' / ')}
                            </div>

                            <a href className="btn-more" onClick={this.handleMoreClick.bind(this, this.props.portfolioData)}>More</a>
                        </div>
                    </div>
                );
            }
        });

        var FullPortfolio = React.createClass({
            updateDimension: function() {
                var clientS = clientSize();
                this.setState({width: clientS[0], height: clientS[1]});
            },
            componentWillMount: function() {
                document.body.classList.add('modal-open');
                this.updateDimension();
            },
            componentDidMount: function() {
                window.addEventListener('resize', this.updateDimension);
            },
            componentWillUnmount: function() {
                document.body.classList.remove('modal-open');
                window.removeEventListener('resize', this.updateDimension);
            },
            handleCloseClick: function(e) {
                e.preventDefault();

                var dom = document.getElementById("full-portfolio-container");
                dom.className = dom.className + ' out';

                setTimeout(function() {
                    React.unmountComponentAtNode(document.getElementById('modal-container'));
                }, 400);
            },
            render: function() {
                var styles = {
                    width: this.state.width,
                    height: this.state.height
                };

                var imgW = {
                    'width':0.6 * this.state.width
                }

                var desc = {__html: this.props.portfolioData.description};
                var projecturl = this.props.portfolioData.url == '' ? '' : <a href={this.props.portfolioData.url} className="portfolio-url">({this.props.portfolioData.url})</a>


                return (
                    <div id="full-portfolio-container" style={styles}>
                        <a href className="btn close-portfolio" onClick={this.handleCloseClick}>
                            X
                        </a>
                        <div className="portfolio-full-title">
                            <h2>{this.props.portfolioData.name}</h2>
                            {projecturl}
                        </div>

                        <div className="portfolio-full-body">
                            <div className="portfolio-full-img-container">
                                <img src={'img/' + this.props.portfolioData.bigpic} style={imgW} />
                            </div>
                            <div className="portfolio-full-description-container">
                                <p className="portfolio-full-description-item"><i className="fa fa-cogs"></i> Technology Used : 
                                    {this.props.portfolioData.technology.map(function(t) {
                                        return t;
                                    }).join(' / ')}
                                </p>
                                <p className="portfolio-full-description-item"><i className="fa fa-bullseye"></i> Role : 
                                    {this.props.portfolioData.role.map(function(r) {
                                        return r;
                                    }).join(' / ')}
                                </p>

                                <div className="portfolio-full-description-summary">
                                    <h3>Summary</h3>
                                    <div className="portolio-full-summary" dangerouslySetInnerHTML={desc} />
                                </div>
                                
                            </div>
                        </div>
                    </div>
                );
            }
        });

        var Portfolio = React.createClass({
            getInitialState: function() {
                return {
                    'portfolios':[]
                }
            },
            componentWillMount: function() {
                var thisObj = this;

                $.ajax({
                    url:'portfolio.json',
                    dataType:'json'
                }).done(function(data) {
                    var myportfolio = [];

                    data.map(function(d) {
                        myportfolio.push(d);
                    });

                    thisObj.setState({
                        portfolios:myportfolio
                    });

                }).fail(function() {
                    console.log('failed to get portfolio data');
                });
            },
            render: function() {
                return (
                    <div>
                        <h2>Projects</h2>
                        {this.state.portfolios.map(function(portfolio) {
                            return <PortfolioItem portfolioData={portfolio} />;
                        })}
                    </div>
                );
            }
        });

        React.render(
            <MainNav />,
            document.getElementById('top-menu')
        );

        React.render(
            <Skillset />,
            document.getElementById('skillset')
        );

        React.render(
            <Portfolio />,
            document.getElementById('portfolio')
        );
        
        React.render(
            <Portfolio />,
            document.getElementById('portfolio')
        );

        $('#hero').particleground({
            dotColor: '#f5f5f5',
            lineColor: '#eeeeee',
            minSpeedX: 0.2,
            maxSpeedX: 0.8,
            minSpeedY: 0.2,
            maxSpeedY: 0.8,
            directionX: 'center',
            directionY: 'center',
            density: 10000,
            particleRadius: 2,
            lineWidth: 0.3,
            curvedLines: false,
            proximity: 100,
            parallax: true,
            parallaxMultiplier: 10
          });
        
    </script>
</body>
</html>